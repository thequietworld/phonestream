<!DOCTYPE html>
<html>
<head>
  <title>iPhone Live Stream (JPEG every 10s)</title>
</head>
<body>
  <h1>Live Stream</h1>
  <video id="camera" autoplay playsinline width="320"></video>
  <canvas id="canvas" style="display:none;"></canvas>
  <img id="latest" src="" width="320" />

  <button id="startBtn">Start Streaming</button>

  <script>
    const video = document.getElementById('camera');
    const canvas = document.getElementById('canvas');
    const latestImg = document.getElementById('latest');
    const startBtn = document.getElementById('startBtn');

    async function startCamera() {
      try {
        const stream = await navigator.mediaDevices.getUserMedia({ video: true });
        video.srcObject = stream;
      } catch (err) {
        alert('Could not access camera: ' + err);
      }
    }

    function captureFrame() {
      canvas.width = video.videoWidth;
      canvas.height = video.videoHeight;
      canvas.getContext('2d').drawImage(video, 0, 0);
      const dataUrl = canvas.toDataURL('image/jpeg', 0.8); // Base64 JPEG
      latestImg.src = dataUrl; // show latest frame
    }

    startBtn.onclick = () => {
      startCamera();
      setInterval(captureFrame, 10000); // every 10 seconds
    };
  </script>
</body>
</html>


